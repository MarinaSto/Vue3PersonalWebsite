var K=Object.defineProperty;var W=(e,s,t)=>s in e?K(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t;var p=(e,s,t)=>(W(e,typeof s!="symbol"?s+"":s,t),t);import{d as q,c as Q,w as l,Q as j,r as X,o as y,a,b as D,e as F,f as H,g as J,u,R as Z,h as P,i as r,j as w,k as ee,P as te,I as N,l as _,m as L,n as se,v as oe,p as A,q as V,s as M,D as R,t as S,x as k,y as ae,z as b,A as $,F as E,B as h,C,E as ie,G as re,H as ne,J as le,K as de,L as ce,M as O,N as v,O as pe,S as ue,T as z,U as me,V as he,W as fe,X as _e,Y as ye}from"./vendor.393f4936.js";const ge=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&c(n)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}};ge();var ve="/logo.png";const we=r("img",{src:ve},null,-1),be=w(" Amicinbici "),xe=q({setup(e){return(s,t)=>{const c=X("router-link");return y(),Q(j,{view:"hHh lpR fFf"},{default:l(()=>[a(J,{class:"bg-primary text-white",style:{}},{default:l(()=>[a(D,{"scroll-offset":250,offset:[0,0]},{default:l(()=>[a(F,null,{default:l(()=>[a(c,{to:{name:"home"}},{default:l(()=>[a(H,null,{default:l(()=>[we]),_:1})]),_:1}),be]),_:1})]),_:1})]),_:1}),a(P,null,{default:l(()=>[a(u(Z))]),_:1})]),_:1})}}});var U="/assets/backgroundVideo.ae917dcd.mp4";const Se={apiKey:"AIzaSyD7-xqz2UouV2US39Y6f2HsQ4HEiZBgFXQ",authDomain:"amicinbiciwebpage.firebaseapp.com",projectId:"amicinbiciwebpage",storageBucket:"amicinbiciwebpage.appspot.com",messagingSenderId:"607208447023",appId:"1:607208447023:web:cd2f1a23f19af3d8657ada",measurementId:"G-X1L24HY4EM"},Ne=ee(Se),Ae=te(Ne);var Ee=Object.defineProperty,Ce=Object.getOwnPropertyDescriptor,m=(e,s,t,c)=>{for(var o=c>1?void 0:c?Ce(s,t):s,i=e.length-1,n;i>=0;i--)(n=e[i])&&(o=(c?n(s,t,o):n(o))||o);return c&&o&&Ee(s,t,o),o};class G{validateOrReject(){oe(this)}update(s){Object.assign(this,s),this.validateOrReject()}}class f extends G{constructor(s){super();p(this,"title");p(this,"episodeNumber");p(this,"videoUrl");p(this,"description");p(this,"distance");p(this,"downhill");p(this,"duration");p(this,"maxAltitude");p(this,"summary");p(this,"uphill");p(this,"gallery");this.update(s),console.log(`Constructed episode #${this.episodeNumber}-${this.title}.`)}}m([N()],f.prototype,"title",2);m([_()],f.prototype,"episodeNumber",2);m([L()],f.prototype,"videoUrl",2);m([N()],f.prototype,"description",2);m([_()],f.prototype,"distance",2);m([_()],f.prototype,"downhill",2);m([_()],f.prototype,"duration",2);m([_()],f.prototype,"maxAltitude",2);m([N()],f.prototype,"summary",2);m([_()],f.prototype,"uphill",2);m([se(),L({},{each:!0})],f.prototype,"gallery",2);class x extends G{constructor(s){super();p(this,"seasonNumber");p(this,"nEpisodes");p(this,"year");p(this,"playlist");this.update(s),console.log(`Constructed season #${this.seasonNumber}.`)}}m([_()],x.prototype,"seasonNumber",2);m([_()],x.prototype,"nEpisodes",2);m([_()],x.prototype,"year",2);m([N()],x.prototype,"playlist",2);const qe={toFirestore:e=>({season:e.seasonNumber,n_episodes:e.nEpisodes,year:e.year,playlist_url:e.playlist}),fromFirestore:(e,s)=>{if(!e.exists())throw new Error("Cannot find any data inside the snapshot.");const t=e.data(s);return new x({seasonNumber:t.season,nEpisodes:t.n_episodes,year:t.year,playlist:t.playlist_url})}},Qe={toFirestore:e=>({title:e.title,episodeNumber:e.episodeNumber,videoUrl:e.videoUrl,description:e.description,distance:e.distance,downhill:e.downhill,duration:e.duration,maxAltitude:e.maxAltitude,summary:e.summary,uphill:e.uphill,gallery:e.gallery}),fromFirestore:(e,s)=>{if(!e.exists())throw new Error("Cannot find any data inside the snapshot.");const t=e.data(s);return new f({title:t.title,episodeNumber:t.episodeNumber,videoUrl:t.videoUrl,description:t.description,distance:t.distance,downhill:t.downhill,duration:t.duration,maxAltitude:t.maxAltitude,summary:t.summary,uphill:t.uphill,gallery:t.gallery})}};function T(e){return V(e,"episodes").withConverter(Qe)}function Y(){return V(Ae,"seasons").withConverter(qe)}async function Ie(){return(await A(Y())).docs}async function Be(e){const s=M(Y(),R("season","==",e)),t=await A(s);if(t.empty){console.error(`Cannot find season with number ${e} in the database.`);return}return t.size>1&&console.warn(`Multiple seasons with the same season number ${e} received. Selecting the first one and discarding the others.`),t.docs[0]}async function $e(e){return(await A(T(e))).docs}async function Oe(e,s){const t=M(T(e),R("episodeNumber","==",s)),c=await A(t);if(c.empty){console.error(`Cannot find episode with number ${s} in season ${e}`);return}return c.size>1&&console.warn(`Multiple episodes with number ${s} in season ${e} received. Selecting the first one and discarding the others.`),c.docs[0]}const ze=r("video",{style:{position:"fixed",left:"0",top:"0",width:"100vw",height:"100vh","object-fit":"cover",opacity:"0.8"},autoplay:"",loop:"",muted:""},[r("source",{type:"video/webm",src:U}),r("source",{type:"video/mp4",src:U})],-1),Ue=r("img",{src:"https://cdn.quasar.dev/logo-v2/svg/logo-mono-white.svg"},null,-1),je=q({setup(e){const s=S([]),t=S({});Ie().then(o=>{s.value=o,o.forEach(i=>{t.value[i.id]=[],$e(i.ref).then(n=>{t.value[i.id]=n})})});const c=k(()=>{if(s.value.length===0)return[];const o=[];return s.value.forEach(i=>{try{const n=[];t.value[i.id].forEach(g=>{n.push(g.data())}),o.push({info:i.data(),episodes:n})}catch{console.log("Season not ready")}}),o});return(o,i)=>(y(),Q(j,{view:"hHh lpR fFf"},{default:l(()=>[a(P,null,{default:l(()=>[ze,a(ae,{elevated:"",class:"bg-grey-8 text-white"},{default:l(()=>[a(D,null,{default:l(()=>[a(F,null,{default:l(()=>[a(H,null,{default:l(()=>[Ue]),_:1}),(y(!0),b(E,null,$(u(c),n=>(y(),b("div",{key:n.info.seasonNumber},[w(" Season "+h(n.info.seasonNumber)+" ",1),(y(!0),b(E,null,$(n.episodes,d=>(y(),b("div",{key:d.episodeNumber},[a(C,{to:{name:"episode",params:{episode:d.episodeNumber,season:n.info.seasonNumber}}},{default:l(()=>[w("Episode "+h(d.episodeNumber),1)]),_:2},1032,["to"]),w(" -> "+h(d.videoUrl),1)]))),128))]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),De={class:"q-pa-md"},Fe={class:"row"},He={class:"col-4 q-pr-sm",style:{position:"relative"}},Pe=r("img",{style:{width:"100%"},src:"https://images.unsplash.com/photo-1569336415962-a4bd9f69cd83?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2062&q=80"},null,-1),Le={class:"row no-wrap items-center text-grey"},Ve={class:"col text-h6 ellipsis"},Me=r("div",{class:"col-auto text-grey text-caption q-pt-md row no-wrap items-center"},null,-1),Re={class:"text-grey-8 row items-center"},ke={class:"text-caption text-weight-medium q-mr-md"},Ge={class:"text-caption text-weight-medium q-mr-md"},Te={class:"text-caption text-weight-medium q-mr-md"},Ye={class:"text-caption text-weight-medium q-mr-md"},Ke={class:"text-caption text-weight-medium q-mr-md"},We={class:"text-caption text-grey"},Xe={class:"text-secondary row items-center"},Je=w(" Stagione \xA0"),Ze=w(" Episodio \xA0"),et={class:"col-8 q-pl-sm"},tt=["src","title"],st=q({setup(e){function s(){return console.assert(typeof o.params.episode=="string","Expected single episode, got multiple."),parseInt(Array.isArray(o.params.episode)?o.params.episode[0]:o.params.episode)}function t(){return console.assert(typeof o.params.season=="string","Expected single season, got multiple."),parseInt(Array.isArray(o.params.season)?o.params.season[0]:o.params.season)}const c=ne();c.loadingBar.start();const o=le(),i=S(void 0),n=S(void 0);Be(t()).then(g=>{i.value=g,g&&Oe(g.ref,s()).then(B=>{n.value=B,c.loadingBar.stop()})});const d=k(()=>{if(!!i.value&&!!n.value)return{info:i.value.data(),episode:n.value.data()}});return(g,B)=>(y(),b(E,null,[a(de),u(d)?(y(),Q(ie,{key:0,padding:""},{default:l(()=>[r("div",De,[r("div",Fe,[r("div",He,[Pe,a(z,{class:"my-card shadow-4"},{default:l(()=>[a(ce,{style:{height:"150px"},src:u(d).episode.gallery[0]},null,8,["src"]),a(O,null,{default:l(()=>[a(C,{fab:"",color:"primary",icon:"place",class:"absolute",style:{top:"0",right:"12px",transform:"translateY(-50%)"}}),r("div",Le,[r("div",Ve,h(u(d).episode.title),1),Me]),r("div",Re,[a(v,{name:"timer",size:"18"}),r("div",ke,h(u(d).episode.duration)+"s ",1),a(v,{name:"south_east",size:"18"}),r("div",Ge,h(u(d).episode.downhill)+" m ",1),a(v,{name:"north_east",size:"18"}),r("div",Te,h(u(d).episode.uphill)+" m ",1),a(v,{name:"straighten",size:"18"}),r("div",Ye,h(u(d).episode.distance/1e3)+" km ",1),a(v,{name:"landscape",size:"18"}),r("div",Ke,h(u(d).episode.maxAltitude)+" slm ",1)])]),_:1}),a(O,{class:"q-pt-none"},{default:l(()=>[r("div",We,h(u(d).episode.description),1)]),_:1}),a(pe),a(ue,null,{default:l(()=>[r("div",Xe,[a(C,{flat:""},{default:l(()=>[Je,r("span",null,h(u(d).info.seasonNumber),1)]),_:1}),a(v,{name:"east",class:"q-mr-md"}),r("div",null,[Ze,r("span",null,h(u(d).episode.episodeNumber),1)])])]),_:1})]),_:1})]),r("div",et,[a(z,{class:"my-card",style:{height:"500px"}},{default:l(()=>[r("iframe",{width:"100%",height:"100%",src:u(d).episode.videoUrl,title:u(d).episode.title,frameborder:"0",allowfullscreen:""},null,8,tt)]),_:1})])])])]),_:1})):re("",!0)],64))}}),ot=me({history:he("/"),routes:[{path:"/",name:"home",component:je},{path:"/season:season/episode:episode",name:"episode",component:st}]});const I=fe(xe);I.use(ot);I.use(_e,{plugins:{LoadingBar:ye},config:{loadingBar:{color:"primary",size:"10px",position:"bottom"}}});I.mount("#app");
